{% extends 'base_logistic.html' %}

{% block content %}
<div class="container-fluid">
    <!-- Sección de lista de órdenes -->
    <div class="table-responsive mb-4">
        <table>
            <thead>
                <tr>
                    <th>Proyecto</th>
                    <th>Cliente</th>
                    <th>Fecha Creada</th>
                    <th>Item</th>
                    <th>Cantidad Solicitada</th>
                    <th>Estado</th>
                    <th>Proveedor</th>
                    <th>Precio</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                {% for item in requirement_order_items %}
                    <tr>
                        <td>{{ item.requirement_order.sales_order.project.name }}</td>
                        <td>{{ item.requirement_order.created_at }}</td>
                        <td>{{ item.sales_order_item.description }}</td>
                        <td>{{ item.quantity_requested }}</td>
                        <td>{{ item.get_estado_display }}</td>
                        <td>
                            {% if item.supplier %}
                                {{ item.supplier.name }}
                            {% else %}
                                Sin proveedor
                            {% endif %}
                        </td>                        
                        <td>{{ item.price }}</td>
                        <td>{{ item.total_price }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="9">No hay ítems aprobados.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        
    </div>
</div>
{% endblock %}
